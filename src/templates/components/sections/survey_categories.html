{% import "components/macros/buttons.html" as buttons %}
{% import "components/macros/survey_elements.html" as survey_elements %}

{% call survey_elements.card() %}
    <h2 class="py-6">Survey categories</h2>
    <div class="pb-6">
        {{ buttons.link_button("Add category", "/edit_category/%s/new" % survey[0]) }}
        <br>
    </div>
    <div>
        {% if categories %}
        {% for category in categories %}
        <!-- {{category[0]}} -->
        {{category[0]}} -- {{category[1]}}: {{category[2]}}
        {{ buttons.link_button("Edit", "/edit_category/%s/%s" %(survey[0],category[0]), id="edit_button_%s" % category[0]) }}
        <form id="delete" class="m-1" onsubmit="return confirm('Are you sure you want to delete this category?')"
            action="/delete_category" method="POST">
            <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
            <input type="hidden" name="category_id" value="{{ category[0] }}">
            <input type="hidden" name="survey_id" value="{{ survey_id }}">
            {{ buttons.form_button("Delete", "delete", "delete", "destructive", id="delete_button_%s" %
            category[0]) }}
        </form>
        <br>
        <hr>
        {% endfor %}
        {% else %}
        <p>Survey has no categories ðŸ¥º</p>
        {% endif %}
    </div>
{% endcall %}