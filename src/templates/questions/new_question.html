{% extends "layout.html" %}
{% block content %}
<form action="/add_question" method="POST">
  <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
  <input type="hidden" name="survey_id" id="survey_id" value={{survey_id}}>
  <input type="hidden" name="question_id" id="question_id" value={{question_id}}>
  <input type="hidden" name="edit" id="edit" value="{{ edit }}">
  <input type="hidden" name="created" id="created" value="{{ created }}">  
    Question: <br>
    <textarea name="text" rows="3" cols="40" style="border:solid 1px black">{{ text }}</textarea>
    <br><br>
    <h3>Insert category weights</h3>
    <div>
        {% for category in categories %}
        {{category[1]}}. Weight: <textarea name="cat{{category[0]}}" id="weight" rows="1" cols="2" style="border:solid 1px black">{{ weights[category[1]] }}</textarea>
        <hr>
        {% endfor %}
    </div>
    <br><br>
    {% if edit %}
    <h3>Question answers</h3>
    <div>
      {% for answer in answers %}
      <br> Answer: <br>
      <textarea name="name_{{answer[1]}}" rows="2" cols="30" style="border:solid 1px black">{{ answer[1] }}</textarea> <br>
      Points:  <textarea name="points_{{answer[1]}}" rows="1" cols="2" style="border:solid 1px black">{{ answer[2] }}</textarea> <br>
      <button type="submit" formaction="/question/delete/{{question_id}}/{{answer[0]}}" onclick="return confirm('Are you sure you want to delete this answer?')" > Delete answer </button>
      <hr>
      {% endfor %}
    </div>
    {% endif %}
    <br>
    New answer: <br>
    <textarea name="answer_text" rows="2" cols="30" style="border:solid 1px black"></textarea><br>
    Points: <br>
    <textarea name="points" rows="1" cols="2" style="border:solid 1px black"></textarea><br>
    <button type="submit" name="submit_answer" formaction="/add_answer"> Add new answer </button>
    <br><br>
    <input type="submit" name="submit" value="Submit">
</form>
{% endblock %}
