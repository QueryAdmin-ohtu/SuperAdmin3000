{% extends "layout.html" %}
{% import "components/form_elements.html" as form_elements %}
{% import "components/survey_elements.html" as survey_elements %}
{% block content %}
<div class="flex flex-col gap-6 items-start w-full">
    <h1 class="text-slate-700">Question #1 of Name of Survey</h1>
    <form class="w-full" action="/add_question" method="POST">
        <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
        <input type="hidden" name="survey_id" id="survey_id" value={{survey_id}}>
        <input type="hidden" name="question_id" id="question_id" value={{question_id}}>
        <input type="hidden" name="edit" id="edit" value="{{ edit }}">
        <input type="hidden" name="created" id="created" value="{{ created }}">
        <div class="grid grid-cols-2 gap-4">
            <div class="flex flex-col gap-6">
                {% call survey_elements.card() %}
                <div class="flex flex-col gap-4">
                    {{ form_elements.text_area("text", "Question", "", false, text) }}
                    <div class="relative flex py-5 items-center">
                        <span class="flex-shrink text-slate-600 mr-4">Category weights</span>
                        <div class="flex-grow border-t border-slate-200"></div>
                    </div>
                    <fieldset>
                        <div class="flex flex-row gap-4">
                            {% for category in categories %}
                            {{ form_elements.number_input("cat" ~ category[0], category[1], "0", false, "-50", "50",
                            "1",
                            weights[category[1]]) }}
                            {% endfor %}
                        </div>
                    </fieldset>
                    {{ form_elements.submit_button("Save changes", "submit", "default", "/add_question") }}
                </div>
                {% endcall %}
                {% for answer in answers %}
                {{ survey_elements.answer_card(answer, question_id, loop.index) }}
                {% endfor %}
            </div>
            <div class="flex flex-col gap-2">
                {% call survey_elements.card() %}
                <div class="flex flex-col gap-4 items-start">
                    <h3 class="text-slate-600">New answer</h3>
                    {{ form_elements.text_area("answer_text", "Answer", "", false) }}
                    {{ form_elements.number_input("points", "Points", "0", false, "-50", "50", "1") }}
                    {{ form_elements.submit_button("Add answer", "submit_answer", "creation", "/add_answer") }}
                </div>
                {% endcall %}
            </div>

        </div>
    </form>
</div>
{% endblock %}